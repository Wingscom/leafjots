---
phase: 12-management-dashboard-comprehensive-analytics
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - web/src/components/filters/DateRangePicker.tsx
  - web/src/components/filters/WalletSelector.tsx
  - web/src/components/filters/ChainSelector.tsx
  - web/src/components/filters/SymbolInput.tsx
  - web/src/components/filters/EntryTypeSelector.tsx
  - web/src/components/filters/AccountTypeSelector.tsx
  - web/src/components/filters/ProtocolSelector.tsx
  - web/src/components/filters/GranularitySelector.tsx
  - web/src/components/filters/FilterBar.tsx
  - web/src/components/filters/index.ts
  - web/src/components/DataTable.tsx
  - web/src/components/Pagination.tsx
autonomous: true
requirements:
  - ANAL-07
  - ANAL-08

must_haves:
  truths:
    - "FilterBar component renders a composable row of filter controls that emit filter state changes"
    - "DateRangePicker allows selecting start and end dates"
    - "DataTable renders sortable tabular data with configurable columns"
    - "All filter components can be imported from a single barrel export"
  artifacts:
    - path: "web/src/components/filters/FilterBar.tsx"
      provides: "Composable filter bar component"
      contains: "export default function FilterBar"
    - path: "web/src/components/filters/index.ts"
      provides: "Barrel export for all filter components"
      contains: "export"
    - path: "web/src/components/DataTable.tsx"
      provides: "Reusable sortable data table"
      contains: "export default function DataTable"
  key_links:
    - from: "web/src/components/filters/FilterBar.tsx"
      to: "web/src/components/filters/*Selector*.tsx"
      via: "renders filter children based on config prop"
      pattern: "children|filters"
---

<objective>
Create reusable frontend filter components and shared data display components that will be used across analytics and improved existing pages.

Purpose: These components are shared building blocks used by Analytics page, Tax Analytics page, and improved existing pages. Building them separately avoids duplication and ensures consistency.

Output: 10 filter components (8 individual + FilterBar + barrel export), DataTable, Pagination
</objective>

<execution_context>
@C:/Users/PC/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/PC/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@web/src/components/Layout.tsx
@web/src/components/EntitySelector.tsx
@web/src/hooks/useWallets.ts
@web/src/api/client.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create filter components with barrel export</name>
  <files>
    web/src/components/filters/DateRangePicker.tsx
    web/src/components/filters/WalletSelector.tsx
    web/src/components/filters/ChainSelector.tsx
    web/src/components/filters/SymbolInput.tsx
    web/src/components/filters/EntryTypeSelector.tsx
    web/src/components/filters/AccountTypeSelector.tsx
    web/src/components/filters/ProtocolSelector.tsx
    web/src/components/filters/GranularitySelector.tsx
    web/src/components/filters/FilterBar.tsx
    web/src/components/filters/index.ts
  </files>
  <action>
All components use Tailwind CSS classes. Match existing style (gray borders, rounded-lg, text-sm). Each is a controlled component accepting `value` + `onChange` props.

1. **DateRangePicker** — Two native `<input type="date">` fields (from/to) with labels. Props: `dateFrom: string | null`, `dateTo: string | null`, `onDateFromChange: (v: string | null) => void`, `onDateToChange: (v: string | null) => void`. Compact layout with flex row.

2. **WalletSelector** — `<select>` dropdown. Props: `value: string | null`, `onChange: (v: string | null) => void`, `wallets: {id: string, label: string}[]`. Shows "All Wallets" as default option.

3. **ChainSelector** — `<select>` with hardcoded chain options: Ethereum, Arbitrum, Optimism, Polygon, Base, BSC, Avalanche, CEX. Props: `value: string | null`, `onChange`. "All Chains" default.

4. **SymbolInput** — Text `<input>` with placeholder "Filter by symbol...". Props: `value: string`, `onChange: (v: string) => void`. Debounce is handled by parent.

5. **EntryTypeSelector** — `<select>` with entry type options: SWAP, TRANSFER, DEPOSIT, WITHDRAWAL, BORROW, REPAY, INCOME, EXPENSE, GAS_FEE. Props: `value: string | null`, `onChange`. "All Types" default.

6. **AccountTypeSelector** — `<select>` with: ASSET, LIABILITY, INCOME, EXPENSE. Props: `value: string | null`, `onChange`. "All Account Types" default.

7. **ProtocolSelector** — `<select>` with common protocols: aave_v3, uniswap_v3, curve, pancakeswap, morpho_blue, lido, pendle. Props: `value: string | null`, `onChange`. "All Protocols" default.

8. **GranularitySelector** — `<select>` with: day, week, month, quarter, year. Props: `value: string`, `onChange`. Default "month".

9. **FilterBar** — Composable container. Props: `children: ReactNode`, `onReset?: () => void`. Renders a flex-wrap row with gap-3, a "Reset" button at the end. Background: bg-white rounded-xl border p-4.

10. **index.ts** — Barrel export: `export { default as FilterBar } from './FilterBar'` etc. for all components.

Consistent styling: all selects use `px-3 py-1.5 border border-gray-300 rounded-lg text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500`. All inputs similar. Labels use `text-xs text-gray-500 mb-1`.
  </action>
  <verify>
Run: `cd web && npx tsc --noEmit` — no TypeScript errors.
Verify all 10 files exist in `web/src/components/filters/`.
  </verify>
  <done>10 filter components exist with consistent Tailwind styling, controlled props, and barrel export. FilterBar provides composable container with reset button.</done>
</task>

<task type="auto">
  <name>Task 2: Create shared DataTable and Pagination components</name>
  <files>
    web/src/components/DataTable.tsx
    web/src/components/Pagination.tsx
  </files>
  <action>
**DataTable** — Generic reusable sortable table component.

Props:
```typescript
interface Column<T> {
  key: string
  header: string
  render?: (item: T) => React.ReactNode
  sortable?: boolean
  align?: 'left' | 'right' | 'center'
  width?: string
}

interface DataTableProps<T> {
  columns: Column<T>[]
  data: T[]
  sortKey?: string
  sortDir?: 'asc' | 'desc'
  onSort?: (key: string) => void
  emptyMessage?: string
  rowKey: (item: T) => string
  onRowClick?: (item: T) => void
}
```

Renders a `<table>` with Tailwind classes: `w-full text-sm`. Header row: `bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase`. Sortable columns show an arrow icon (use unicode or inline SVG). Body rows: `border-b border-gray-100 hover:bg-gray-50`. If `onRowClick`, add cursor-pointer. Empty state: full-width cell with message.

Use `render` function for custom cell content, fall back to `item[column.key]` with string coercion. Support `align` via `text-left/text-right/text-center` classes.

**Pagination** — Props: `total: number`, `limit: number`, `offset: number`, `onChange: (offset: number) => void`. Shows "Showing X-Y of Z". Previous/Next buttons. Page number buttons if total pages <= 7, otherwise show first, last, and surrounding pages with "..." ellipsis. Buttons: `px-3 py-1 rounded text-sm`. Active page: `bg-blue-600 text-white`. Disabled buttons: `opacity-50 cursor-not-allowed`.
  </action>
  <verify>
Run: `cd web && npx tsc --noEmit` — no TypeScript errors.
Verify both files exist.
  </verify>
  <done>DataTable supports sortable columns with custom renderers, and Pagination shows page navigation with proper state management. Both use consistent Tailwind styling.</done>
</task>

</tasks>

<verification>
- `cd web && npx tsc --noEmit` — zero TypeScript errors
- All 12 component files exist
- `grep -r "export" web/src/components/filters/index.ts` — exports all 9 components
</verification>

<success_criteria>
- All filter components are controlled (value + onChange props)
- FilterBar is composable (accepts children)
- DataTable supports generic types, sortable columns, custom renderers
- Pagination handles edge cases (first page, last page, single page)
- All components match existing Tailwind styling conventions
</success_criteria>

<output>
After completion, create `.planning/phases/12-management-dashboard-comprehensive-analytics/12-03-SUMMARY.md`
</output>
